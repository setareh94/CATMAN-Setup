var util = require('util');
var xbee_api = require('../../lib/xbee-api.js');
var C = xbee_api.constants;
var xbeeAPI = new xbee_api.XBeeAPI({ api_mode: 1 });
var parser = xbeeAPI.rawParser();
xbeeAPI.on("frame_object", function(frame) {
    console.log(util.inspect(frame));
});
var test_frames = new Buffer([
    // Encryption: off
    0x7e, // Start byte
    0x00, 0x0e, // length
    0x83, // Frame type
    0x00, 0x31, // Src address
    0x2b, // rssi
    0x00, // options
    0x01, 0x06, 0x04, 0x00, 0x00,0x01, 0xc5, 0x00, 0xf2, 0x5d, // RF

    // Encryption: on
    0x7e, // Start byte
    0x00, 0x12, // length
    0x83, // Frame type
    0x00, 0x31, 0x2c, 0xff, 0x04, 0xb5, 0x47, 0x01, // 64 Src address ?
    0x06, // options ?
    0x04, // rssi ?
    0x00, 0x00, 0x01, 0xdd, 0x00, 0xf6, 0x41 // RF ?
]);

var encrypt_frames = new Buffer([
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x7e, 0x00, 0x12, 0x83, 0x00, 0x31, 0x2c, 0x00, 0xff, 0x04, 0xb5, 0x47,
    0x01, 0x06, 0x04, 0x00, 0x00, 0x01, 0xdd, 0x00, 0xf6, 0x41,
    0x7e, 0x00, 0x12, 0x83, 0x00, 0x31, 0x2c, 0x00, 0xff, 0x04, 0xb5, 0x47,
    0x01, 0x06, 0x04, 0x00, 0x00, 0x01, 0xde, 0x00, 0xf6, 0x40,
    0x7e, 0x00, 0x12, 0x83, 0x00, 0x31, 0x2c, 0x00, 0xff, 0x04, 0xb5, 0x47,
    0x01, 0x06, 0x04, 0x00, 0x00, 0x01, 0xdd, 0x00, 0xf6, 0x41,
    0x7e, 0x00, 0x12, 0x83, 0x00, 0x31, 0x2c, 0x00, 0xff, 0x04, 0xb5, 0x47,
    0x01, 0x06, 0x04, 0x00, 0x00, 0x01, 0xdd, 0x00, 0xf5, 0x42,
    0x7e, 0x00, 0x12, 0x83, 0x00, 0x31, 0x2c, 0x00, 0xff, 0x04, 0xb5, 0x47,
    0x01, 0x06, 0x04, 0x00, 0x00, 0x01, 0xdd, 0x00, 0xf5, 0x42
]);

var unencrypt_frames = new Buffer([
    0x7e, 0x00, 0x0e, 0x83, 0x00, 0x31, 0x2b, 0x00, 0x01, 0x06, 0x04, 0x00,
    0x00,0x01, 0xc5, 0x00, 0xf2, 0x5d,
    0x7e, 0x00, 0x0e, 0x83, 0x00, 0x31, 0x2c, 0x00, 0x01, 0x06, 0x04, 0x00,
    0x00, 0x01, 0xc6, 0x00, 0xf2, 0x5b,
    0x7e, 0x00, 0x0e, 0x83, 0x00, 0x31, 0x2c, 0x00, 0x01, 0x06, 0x04, 0x00,
    0x00, 0x01, 0xc6, 0x00, 0xf2, 0x5b,
    0x7e, 0x00, 0x0e, 0x83, 0x00, 0x31, 0x2c, 0x00, 0x01, 0x06, 0x04, 0x00,
    0x00, 0x01, 0xc6, 0x00, 0xf2, 0x5b,
    0x7e, 0x00, 0x0e, 0x83, 0x00, 0x31, 0x2c, 0x00, 0x01, 0x06, 0x04, 0x00,
    0x00, 0x01, 0xc6, 0x00, 0xf3, 0x5a,
    0x7e, 0x00, 0x0e, 0x83, 0x00, 0x31, 0x2c, 0x00, 0x01, 0x06, 0x04,
    0x00, 0x00, 0x01, 0xc6, 0x00, 0xf2, 0x5b
]);


parser(null, test_frames);
